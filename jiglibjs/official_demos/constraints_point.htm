<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>

<title>jigLib benchmarking / regression test: point constraints</title>

<script type="text/javascript" src="jiglib/jiglib.all.min.js"></script>
<script type="text/javascript" src="glge/glge-compiled-min.js"></script>
<style>
	body {
		margin: auto;
		background-color: #888;
		padding-top: 50px;
		font-family: sans;
		color: #666;
		font-size: 0.8em
	}
	
	#container {
		margin: auto;
		width: 900px;
		padding: 10px;
		background-color: #fff;
		border-radius: 5px;
		-webkit-box-shadow: 5px 5px 2px #444;
	}
</style>
</head>
<body>

<div id="container">
	<canvas id="canvas" width="900" height="400"></canvas>
	
	<h2>Constraints: points -&gt; spheres</h2>
	This is a test for point constraints working with spheres.<br />
	You can control the red sphere with your arrow keys, and make it jump/fly by pushing/holding your spacebar.
	<br />
	<!-- divs for echoing test output and debug information -->
	<div id="details" style="width: 100%">
	<div id="debug" style="width: 50%; float: left;"></div>
	<div id="debug2" style="width: 50%; float: left;"></div>
	<div style="clear: both;"></div>
</div>


<!-- GLGE scene definitions (meshes, objects, lights, cameras etc.) -->
<script id="glge_document" type="text/xml">
	<glge>

		<mesh id="groundMesh">
			<positions>1.00,-0.00,1.00,-1.00,-0.00,1.00,-1.00,0.00,-1.00,1.00,-0.00,1.00,-1.00,0.00,-1.00,1.00,0.00,-1.00</positions>
			<normals>-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00</normals>;
			<uv1>1.00,1.00,0.00,1.00,0.00,0.00,1.00,1.00,0.00,0.00,1.00,0.00</uv1>
			<faces>0,1,2,3,4,5,</faces>
		</mesh>
		
		<mesh id="Sphere">
			<positions>0.262869,-0.809012,-0.525738,0.425323,-0.309011,-0.850654,0.723600,-0.525720,-0.447215,0.425323,-0.309011,-0.850654,0.262869,-0.809012,-0.525738,-0.162456,-0.499995,-0.850654,-0.276385,-0.850640,-0.447215,-0.162456,-0.499995,-0.850654,0.262869,-0.809012,-0.525738,-0.162456,-0.499995,-0.850654,0.000000,0.000000,-1.000000,0.425323,-0.309011,-0.850654,0.850648,0.000000,-0.525736,0.723600,-0.525720,-0.447215,0.425323,-0.309011,-0.850654,0.425323,-0.309011,-0.850654,0.425323,0.309011,-0.850654,0.850648,0.000000,-0.525736,0.723600,0.525720,-0.447215,0.850648,0.000000,-0.525736,0.425323,0.309011,-0.850654,0.425323,-0.309011,-0.850654,0.000000,0.000000,-1.000000,0.425323,0.309011,-0.850654,-0.688189,-0.499997,-0.525736,-0.162456,-0.499995,-0.850654,-0.276385,-0.850640,-0.447215,-0.162456,-0.499995,-0.850654,-0.688189,-0.499997,-0.525736,-0.525730,0.000000,-0.850652,-0.894425,0.000000,-0.447215,-0.525730,0.000000,-0.850652,-0.688189,-0.499997,-0.525736,-0.525730,0.000000,-0.850652,0.000000,0.000000,-1.000000,-0.162456,-0.499995,-0.850654,-0.688189,0.499997,-0.525736,-0.525730,0.000000,-0.850652,-0.894425,0.000000,-0.447215,-0.525730,0.000000,-0.850652,-0.688189,0.499997,-0.525736,-0.162456,0.499995,-0.850654,-0.276385,0.850640,-0.447215,-0.162456,0.499995,-0.850654,-0.688189,0.499997,-0.525736,-0.162456,0.499995,-0.850654,0.000000,0.000000,-1.000000,-0.525730,0.000000,-0.850652,0.262869,0.809012,-0.525738,-0.162456,0.499995,-0.850654,-0.276385,0.850640,-0.447215,-0.162456,0.499995,-0.850654,0.262869,0.809012,-0.525738,0.425323,0.309011,-0.850654,0.723600,0.525720,-0.447215,0.425323,0.309011,-0.850654,0.262869,0.809012,-0.525738,0.425323,0.309011,-0.850654,0.000000,0.000000,-1.000000,-0.162456,0.499995,-0.850654,0.951058,-0.309013,0.000000,0.723600,-0.525720,-0.447215,0.850648,0.000000,-0.525736,0.850648,0.000000,-0.525736,0.951058,0.309013,0.000000,0.951058,-0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,-0.309013,0.000000,0.951058,0.309013,0.000000,0.951058,0.309013,0.000000,0.850648,0.000000,-0.525736,0.723600,0.525720,-0.447215,0.000000,-1.000000,0.000000,-0.276385,-0.850640,-0.447215,0.262869,-0.809012,-0.525738,0.262869,-0.809012,-0.525738,0.587786,-0.809017,0.000000,0.000000,-1.000000,0.000000,0.276385,-0.850640,0.447215,0.000000,-1.000000,0.000000,0.587786,-0.809017,0.000000,0.587786,-0.809017,0.000000,0.262869,-0.809012,-0.525738,0.723600,-0.525720,-0.447215,-0.951058,-0.309013,0.000000,-0.894425,0.000000,-0.447215,-0.688189,-0.499997,-0.525736,-0.688189,-0.499997,-0.525736,-0.587786,-0.809017,0.000000,-0.951058,-0.309013,0.000000,-0.723600,-0.525720,0.447215,-0.951058,-0.309013,0.000000,-0.587786,-0.809017,0.000000,-0.587786,-0.809017,0.000000,-0.688189,-0.499997,-0.525736,-0.276385,-0.850640,-0.447215,-0.587786,0.809017,0.000000,-0.276385,0.850640,-0.447215,-0.688189,0.499997,-0.525736,-0.688189,0.499997,-0.525736,-0.951058,0.309013,0.000000,-0.587786,0.809017,0.000000,-0.723600,0.525720,0.447215,-0.587786,0.809017,0.000000,-0.951058,0.309013,0.000000,-0.951058,0.309013,0.000000,-0.688189,0.499997,-0.525736,-0.894425,0.000000,-0.447215,0.587786,0.809017,0.000000,0.723600,0.525720,-0.447215,0.262869,0.809012,-0.525738,0.262869,0.809012,-0.525738,0.000000,1.000000,0.000000,0.587786,0.809017,0.000000,0.276385,0.850640,0.447215,0.587786,0.809017,0.000000,0.000000,1.000000,0.000000,0.000000,1.000000,0.000000,0.262869,0.809012,-0.525738,-0.276385,0.850640,-0.447215,0.688189,-0.499997,0.525736,0.951058,-0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,-0.309013,0.000000,0.688189,-0.499997,0.525736,0.587786,-0.809017,0.000000,0.276385,-0.850640,0.447215,0.587786,-0.809017,0.000000,0.688189,-0.499997,0.525736,0.587786,-0.809017,0.000000,0.723600,-0.525720,-0.447215,0.951058,-0.309013,0.000000,-0.262869,-0.809012,0.525738,0.000000,-1.000000,0.000000,0.276385,-0.850640,0.447215,0.000000,-1.000000,0.000000,-0.262869,-0.809012,0.525738,-0.587786,-0.809017,0.000000,-0.723600,-0.525720,0.447215,-0.587786,-0.809017,0.000000,-0.262869,-0.809012,0.525738,-0.587786,-0.809017,0.000000,-0.276385,-0.850640,-0.447215,0.000000,-1.000000,0.000000,-0.850648,0.000000,0.525736,-0.951058,-0.309013,0.000000,-0.723600,-0.525720,0.447215,-0.951058,-0.309013,0.000000,-0.850648,0.000000,0.525736,-0.951058,0.309013,0.000000,-0.723600,0.525720,0.447215,-0.951058,0.309013,0.000000,-0.850648,0.000000,0.525736,-0.951058,0.309013,0.000000,-0.894425,0.000000,-0.447215,-0.951058,-0.309013,0.000000,-0.262869,0.809012,0.525738,-0.587786,0.809017,0.000000,-0.723600,0.525720,0.447215,-0.587786,0.809017,0.000000,-0.262869,0.809012,0.525738,0.000000,1.000000,0.000000,0.276385,0.850640,0.447215,0.000000,1.000000,0.000000,-0.262869,0.809012,0.525738,0.000000,1.000000,0.000000,-0.276385,0.850640,-0.447215,-0.587786,0.809017,0.000000,0.688189,0.499997,0.525736,0.587786,0.809017,0.000000,0.276385,0.850640,0.447215,0.587786,0.809017,0.000000,0.688189,0.499997,0.525736,0.951058,0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,0.309013,0.000000,0.688189,0.499997,0.525736,0.951058,0.309013,0.000000,0.723600,0.525720,-0.447215,0.587786,0.809017,0.000000,0.162456,-0.499995,0.850654,0.276385,-0.850640,0.447215,0.688189,-0.499997,0.525736,0.688189,-0.499997,0.525736,0.525730,0.000000,0.850652,0.162456,-0.499995,0.850654,0.000000,0.000000,1.000000,0.162456,-0.499995,0.850654,0.525730,0.000000,0.850652,0.525730,0.000000,0.850652,0.688189,-0.499997,0.525736,0.894425,0.000000,0.447215,-0.425323,-0.309011,0.850654,-0.723600,-0.525720,0.447215,-0.262869,-0.809012,0.525738,-0.262869,-0.809012,0.525738,0.162456,-0.499995,0.850654,-0.425323,-0.309011,0.850654,0.000000,0.000000,1.000000,-0.425323,-0.309011,0.850654,0.162456,-0.499995,0.850654,0.162456,-0.499995,0.850654,-0.262869,-0.809012,0.525738,0.276385,-0.850640,0.447215,-0.425323,0.309011,0.850654,-0.723600,0.525720,0.447215,-0.850648,0.000000,0.525736,-0.850648,0.000000,0.525736,-0.425323,-0.309011,0.850654,-0.425323,0.309011,0.850654,0.000000,0.000000,1.000000,-0.425323,0.309011,0.850654,-0.425323,-0.309011,0.850654,-0.425323,-0.309011,0.850654,-0.850648,0.000000,0.525736,-0.723600,-0.525720,0.447215,0.162456,0.499995,0.850654,0.276385,0.850640,0.447215,-0.262869,0.809012,0.525738,-0.262869,0.809012,0.525738,-0.425323,0.309011,0.850654,0.162456,0.499995,0.850654,0.000000,0.000000,1.000000,0.162456,0.499995,0.850654,-0.425323,0.309011,0.850654,-0.425323,0.309011,0.850654,-0.262869,0.809012,0.525738,-0.723600,0.525720,0.447215,0.525730,0.000000,0.850652,0.894425,0.000000,0.447215,0.688189,0.499997,0.525736,0.688189,0.499997,0.525736,0.162456,0.499995,0.850654,0.525730,0.000000,0.850652,0.000000,0.000000,1.000000,0.525730,0.000000,0.850652,0.162456,0.499995,0.850654,0.162456,0.499995,0.850654,0.688189,0.499997,0.525736,0.276385,0.850640,0.447215</positions>
			<normals>0.262856,-0.808985,-0.525712,0.425306,-0.309000,-0.850642,0.723594,-0.525712,-0.447188,0.425306,-0.309000,-0.850642,0.262856,-0.808985,-0.525712,-0.162450,-0.499985,-0.850642,-0.276376,-0.850642,-0.447188,-0.162450,-0.499985,-0.850642,0.262856,-0.808985,-0.525712,-0.162450,-0.499985,-0.850642,0.000000,0.000000,-1.000000,0.425306,-0.309000,-0.850642,0.850642,0.000000,-0.525712,0.723594,-0.525712,-0.447188,0.425306,-0.309000,-0.850642,0.425306,-0.309000,-0.850642,0.425306,0.309000,-0.850642,0.850642,0.000000,-0.525712,0.723594,0.525712,-0.447188,0.850642,0.000000,-0.525712,0.425306,0.309000,-0.850642,0.425306,-0.309000,-0.850642,0.000000,0.000000,-1.000000,0.425306,0.309000,-0.850642,-0.688162,-0.499985,-0.525712,-0.162450,-0.499985,-0.850642,-0.276376,-0.850642,-0.447188,-0.162450,-0.499985,-0.850642,-0.688162,-0.499985,-0.525712,-0.525712,0.000000,-0.850642,-0.894406,0.000000,-0.447188,-0.525712,0.000000,-0.850642,-0.688162,-0.499985,-0.525712,-0.525712,0.000000,-0.850642,0.000000,0.000000,-1.000000,-0.162450,-0.499985,-0.850642,-0.688162,0.499985,-0.525712,-0.525712,0.000000,-0.850642,-0.894406,0.000000,-0.447188,-0.525712,0.000000,-0.850642,-0.688162,0.499985,-0.525712,-0.162450,0.499985,-0.850642,-0.276376,0.850642,-0.447188,-0.162450,0.499985,-0.850642,-0.688162,0.499985,-0.525712,-0.162450,0.499985,-0.850642,0.000000,0.000000,-1.000000,-0.525712,0.000000,-0.850642,0.262856,0.808985,-0.525712,-0.162450,0.499985,-0.850642,-0.276376,0.850642,-0.447188,-0.162450,0.499985,-0.850642,0.262856,0.808985,-0.525712,0.425306,0.309000,-0.850642,0.723594,0.525712,-0.447188,0.425306,0.309000,-0.850642,0.262856,0.808985,-0.525712,0.425306,0.309000,-0.850642,0.000000,0.000000,-1.000000,-0.162450,0.499985,-0.850642,0.951048,-0.309000,0.000000,0.723594,-0.525712,-0.447188,0.850642,0.000000,-0.525712,0.850642,0.000000,-0.525712,0.951048,0.309000,0.000000,0.951048,-0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,-0.309000,0.000000,0.951048,0.309000,0.000000,0.951048,0.309000,0.000000,0.850642,0.000000,-0.525712,0.723594,0.525712,-0.447188,0.000000,-1.000000,0.000000,-0.276376,-0.850642,-0.447188,0.262856,-0.808985,-0.525712,0.262856,-0.808985,-0.525712,0.587756,-0.809015,0.000000,0.000000,-1.000000,0.000000,0.276376,-0.850642,0.447188,0.000000,-1.000000,0.000000,0.587756,-0.809015,0.000000,0.587756,-0.809015,0.000000,0.262856,-0.808985,-0.525712,0.723594,-0.525712,-0.447188,-0.951048,-0.309000,0.000000,-0.894406,0.000000,-0.447188,-0.688162,-0.499985,-0.525712,-0.688162,-0.499985,-0.525712,-0.587756,-0.809015,0.000000,-0.951048,-0.309000,0.000000,-0.723594,-0.525712,0.447188,-0.951048,-0.309000,0.000000,-0.587756,-0.809015,0.000000,-0.587756,-0.809015,0.000000,-0.688162,-0.499985,-0.525712,-0.276376,-0.850642,-0.447188,-0.587756,0.809015,0.000000,-0.276376,0.850642,-0.447188,-0.688162,0.499985,-0.525712,-0.688162,0.499985,-0.525712,-0.951048,0.309000,0.000000,-0.587756,0.809015,0.000000,-0.723594,0.525712,0.447188,-0.587756,0.809015,0.000000,-0.951048,0.309000,0.000000,-0.951048,0.309000,0.000000,-0.688162,0.499985,-0.525712,-0.894406,0.000000,-0.447188,0.587756,0.809015,0.000000,0.723594,0.525712,-0.447188,0.262856,0.808985,-0.525712,0.262856,0.808985,-0.525712,0.000000,1.000000,0.000000,0.587756,0.809015,0.000000,0.276376,0.850642,0.447188,0.587756,0.809015,0.000000,0.000000,1.000000,0.000000,0.000000,1.000000,0.000000,0.262856,0.808985,-0.525712,-0.276376,0.850642,-0.447188,0.688162,-0.499985,0.525712,0.951048,-0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,-0.309000,0.000000,0.688162,-0.499985,0.525712,0.587756,-0.809015,0.000000,0.276376,-0.850642,0.447188,0.587756,-0.809015,0.000000,0.688162,-0.499985,0.525712,0.587756,-0.809015,0.000000,0.723594,-0.525712,-0.447188,0.951048,-0.309000,0.000000,-0.262856,-0.808985,0.525712,0.000000,-1.000000,0.000000,0.276376,-0.850642,0.447188,0.000000,-1.000000,0.000000,-0.262856,-0.808985,0.525712,-0.587756,-0.809015,0.000000,-0.723594,-0.525712,0.447188,-0.587756,-0.809015,0.000000,-0.262856,-0.808985,0.525712,-0.587756,-0.809015,0.000000,-0.276376,-0.850642,-0.447188,0.000000,-1.000000,0.000000,-0.850642,0.000000,0.525712,-0.951048,-0.309000,0.000000,-0.723594,-0.525712,0.447188,-0.951048,-0.309000,0.000000,-0.850642,0.000000,0.525712,-0.951048,0.309000,0.000000,-0.723594,0.525712,0.447188,-0.951048,0.309000,0.000000,-0.850642,0.000000,0.525712,-0.951048,0.309000,0.000000,-0.894406,0.000000,-0.447188,-0.951048,-0.309000,0.000000,-0.262856,0.808985,0.525712,-0.587756,0.809015,0.000000,-0.723594,0.525712,0.447188,-0.587756,0.809015,0.000000,-0.262856,0.808985,0.525712,0.000000,1.000000,0.000000,0.276376,0.850642,0.447188,0.000000,1.000000,0.000000,-0.262856,0.808985,0.525712,0.000000,1.000000,0.000000,-0.276376,0.850642,-0.447188,-0.587756,0.809015,0.000000,0.688162,0.499985,0.525712,0.587756,0.809015,0.000000,0.276376,0.850642,0.447188,0.587756,0.809015,0.000000,0.688162,0.499985,0.525712,0.951048,0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,0.309000,0.000000,0.688162,0.499985,0.525712,0.951048,0.309000,0.000000,0.723594,0.525712,-0.447188,0.587756,0.809015,0.000000,0.162450,-0.499985,0.850642,0.276376,-0.850642,0.447188,0.688162,-0.499985,0.525712,0.688162,-0.499985,0.525712,0.525712,0.000000,0.850642,0.162450,-0.499985,0.850642,0.000000,0.000000,1.000000,0.162450,-0.499985,0.850642,0.525712,0.000000,0.850642,0.525712,0.000000,0.850642,0.688162,-0.499985,0.525712,0.894406,0.000000,0.447188,-0.425306,-0.309000,0.850642,-0.723594,-0.525712,0.447188,-0.262856,-0.808985,0.525712,-0.262856,-0.808985,0.525712,0.162450,-0.499985,0.850642,-0.425306,-0.309000,0.850642,0.000000,0.000000,1.000000,-0.425306,-0.309000,0.850642,0.162450,-0.499985,0.850642,0.162450,-0.499985,0.850642,-0.262856,-0.808985,0.525712,0.276376,-0.850642,0.447188,-0.425306,0.309000,0.850642,-0.723594,0.525712,0.447188,-0.850642,0.000000,0.525712,-0.850642,0.000000,0.525712,-0.425306,-0.309000,0.850642,-0.425306,0.309000,0.850642,0.000000,0.000000,1.000000,-0.425306,0.309000,0.850642,-0.425306,-0.309000,0.850642,-0.425306,-0.309000,0.850642,-0.850642,0.000000,0.525712,-0.723594,-0.525712,0.447188,0.162450,0.499985,0.850642,0.276376,0.850642,0.447188,-0.262856,0.808985,0.525712,-0.262856,0.808985,0.525712,-0.425306,0.309000,0.850642,0.162450,0.499985,0.850642,0.000000,0.000000,1.000000,0.162450,0.499985,0.850642,-0.425306,0.309000,0.850642,-0.425306,0.309000,0.850642,-0.262856,0.808985,0.525712,-0.723594,0.525712,0.447188,0.525712,0.000000,0.850642,0.894406,0.000000,0.447188,0.688162,0.499985,0.525712,0.688162,0.499985,0.525712,0.162450,0.499985,0.850642,0.525712,0.000000,0.850642,0.000000,0.000000,1.000000,0.525712,0.000000,0.850642,0.162450,0.499985,0.850642,0.162450,0.499985,0.850642,0.688162,0.499985,0.525712,0.276376,0.850642,0.447188</normals>
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239</faces>
		</mesh>
		
		<mesh id="Cube">
			<positions>1.000,1.000,1.000,1.000,1.000,-1.000,-1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,-1.000</positions>
			<normals>0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,-0.000,0.000,1.000,-0.000,0.000,1.000,-0.000,0.000,-0.000,-0.000,1.000,-0.000,-0.000,1.000,-0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,0.000,-1.000,0.000,0.000,-1.000,0.000,0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000</normals>
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35</faces>
		</mesh>

		<mesh id="Cylinder">
			<positions>0.00,1.00,0.00,0.71,1.00,0.71,0.83,1.00,0.56,0.00,-1.00,-0.00,0.83,-1.00,0.56,0.71,-1.00,0.71,0.00,1.00,0.00,0.83,1.00,0.56,0.92,1.00,0.38,0.00,-1.00,-0.00,0.92,-1.00,0.38,0.83,-1.00,0.56,0.00,1.00,0.00,0.92,1.00,0.38,0.98,1.00,0.20,0.00,-1.00,-0.00,0.98,-1.00,0.20,0.92,-1.00,0.38,0.00,1.00,0.00,0.98,1.00,0.20,1.00,1.00,0.00,0.00,-1.00,-0.00,1.00,-1.00,-0.00,0.98,-1.00,0.20,0.00,1.00,0.00,1.00,1.00,0.00,0.98,1.00,-0.20,0.00,-1.00,-0.00,0.98,-1.00,-0.20,1.00,-1.00,-0.00,0.00,1.00,0.00,0.98,1.00,-0.20,0.92,1.00,-0.38,0.00,-1.00,-0.00,0.92,-1.00,-0.38,0.98,-1.00,-0.20,0.00,1.00,0.00,0.92,1.00,-0.38,0.83,1.00,-0.56,0.00,-1.00,-0.00,0.83,-1.00,-0.56,0.92,-1.00,-0.38,0.00,1.00,0.00,0.83,1.00,-0.56,0.71,1.00,-0.71,0.00,-1.00,-0.00,0.71,-1.00,-0.71,0.83,-1.00,-0.56,0.00,1.00,0.00,0.71,1.00,-0.71,0.56,1.00,-0.83,0.00,-1.00,-0.00,0.56,-1.00,-0.83,0.71,-1.00,-0.71,0.00,1.00,0.00,0.56,1.00,-0.83,0.38,1.00,-0.92,0.00,-1.00,-0.00,0.38,-1.00,-0.92,0.56,-1.00,-0.83,0.00,1.00,0.00,0.38,1.00,-0.92,0.20,1.00,-0.98,0.00,-1.00,-0.00,0.20,-1.00,-0.98,0.38,-1.00,-0.92,0.00,1.00,0.00,0.20,1.00,-0.98,-0.00,1.00,-1.00,0.00,-1.00,-0.00,0.00,-1.00,-1.00,0.20,-1.00,-0.98,0.00,1.00,0.00,-0.00,1.00,-1.00,-0.20,1.00,-0.98,0.00,-1.00,-0.00,-0.20,-1.00,-0.98,0.00,-1.00,-1.00,0.00,1.00,0.00,-0.20,1.00,-0.98,-0.38,1.00,-0.92,0.00,-1.00,-0.00,-0.38,-1.00,-0.92,-0.20,-1.00,-0.98,0.00,1.00,0.00,-0.38,1.00,-0.92,-0.56,1.00,-0.83,0.00,-1.00,-0.00,-0.56,-1.00,-0.83,-0.38,-1.00,-0.92,0.00,1.00,0.00,-0.56,1.00,-0.83,-0.71,1.00,-0.71,0.00,-1.00,-0.00,-0.71,-1.00,-0.71,-0.56,-1.00,-0.83,0.00,1.00,0.00,-0.71,1.00,-0.71,-0.83,1.00,-0.56,0.00,-1.00,-0.00,-0.83,-1.00,-0.56,-0.71,-1.00,-0.71,0.00,1.00,0.00,-0.83,1.00,-0.56,-0.92,1.00,-0.38,0.00,-1.00,-0.00,-0.92,-1.00,-0.38,-0.83,-1.00,-0.56,0.00,1.00,0.00,-0.92,1.00,-0.38,-0.98,1.00,-0.20,0.00,-1.00,-0.00,-0.98,-1.00,-0.20,-0.92,-1.00,-0.38,0.00,1.00,0.00,-0.98,1.00,-0.20,-1.00,1.00,0.00,0.00,-1.00,-0.00,-1.00,-1.00,-0.00,-0.98,-1.00,-0.20,0.00,1.00,0.00,-1.00,1.00,0.00,-0.98,1.00,0.20,0.00,-1.00,-0.00,-0.98,-1.00,0.20,-1.00,-1.00,-0.00,0.00,1.00,0.00,-0.98,1.00,0.20,-0.92,1.00,0.38,0.00,-1.00,-0.00,-0.92,-1.00,0.38,-0.98,-1.00,0.20,0.00,1.00,0.00,-0.92,1.00,0.38,-0.83,1.00,0.56,0.00,-1.00,-0.00,-0.83,-1.00,0.56,-0.92,-1.00,0.38,0.00,1.00,0.00,-0.83,1.00,0.56,-0.71,1.00,0.71,0.00,-1.00,-0.00,-0.71,-1.00,0.71,-0.83,-1.00,0.56,0.00,1.00,0.00,-0.71,1.00,0.71,-0.56,1.00,0.83,0.00,-1.00,-0.00,-0.56,-1.00,0.83,-0.71,-1.00,0.71,0.00,1.00,0.00,-0.56,1.00,0.83,-0.38,1.00,0.92,0.00,-1.00,-0.00,-0.38,-1.00,0.92,-0.56,-1.00,0.83,0.00,1.00,0.00,-0.38,1.00,0.92,-0.20,1.00,0.98,0.00,-1.00,-0.00,-0.20,-1.00,0.98,-0.38,-1.00,0.92,0.00,1.00,0.00,-0.20,1.00,0.98,0.00,1.00,1.00,0.00,-1.00,-0.00,-0.00,-1.00,1.00,-0.20,-1.00,0.98,0.00,1.00,0.00,0.00,1.00,1.00,0.20,1.00,0.98,0.00,-1.00,-0.00,0.20,-1.00,0.98,-0.00,-1.00,1.00,0.00,1.00,0.00,0.20,1.00,0.98,0.38,1.00,0.92,0.00,-1.00,-0.00,0.38,-1.00,0.92,0.20,-1.00,0.98,0.00,1.00,0.00,0.38,1.00,0.92,0.56,1.00,0.83,0.00,-1.00,-0.00,0.56,-1.00,0.83,0.38,-1.00,0.92,0.56,1.00,0.83,0.71,1.00,0.71,0.00,1.00,0.00,0.00,-1.00,-0.00,0.71,-1.00,0.71,0.56,-1.00,0.83,0.71,1.00,0.71,0.71,-1.00,0.71,0.83,-1.00,0.56,0.83,1.00,0.56,0.83,-1.00,0.56,0.92,-1.00,0.38,0.92,1.00,0.38,0.92,-1.00,0.38,0.98,-1.00,0.20,0.98,1.00,0.20,0.98,-1.00,0.20,1.00,-1.00,-0.00,1.00,1.00,0.00,1.00,-1.00,-0.00,0.98,-1.00,-0.20,0.98,1.00,-0.20,0.98,-1.00,-0.20,0.92,-1.00,-0.38,0.92,1.00,-0.38,0.92,-1.00,-0.38,0.83,-1.00,-0.56,0.83,1.00,-0.56,0.83,-1.00,-0.56,0.71,-1.00,-0.71,0.71,1.00,-0.71,0.71,-1.00,-0.71,0.56,-1.00,-0.83,0.56,1.00,-0.83,0.56,-1.00,-0.83,0.38,-1.00,-0.92,0.38,1.00,-0.92,0.38,-1.00,-0.92,0.20,-1.00,-0.98,0.20,1.00,-0.98,0.20,-1.00,-0.98,0.00,-1.00,-1.00,-0.00,1.00,-1.00,0.00,-1.00,-1.00,-0.20,-1.00,-0.98,-0.20,1.00,-0.98,-0.20,-1.00,-0.98,-0.38,-1.00,-0.92,-0.38,1.00,-0.92,-0.38,-1.00,-0.92,-0.56,-1.00,-0.83,-0.56,1.00,-0.83,-0.56,-1.00,-0.83,-0.71,-1.00,-0.71,-0.71,1.00,-0.71,-0.71,-1.00,-0.71,-0.83,-1.00,-0.56,-0.83,1.00,-0.56,-0.83,-1.00,-0.56,-0.92,-1.00,-0.38,-0.92,1.00,-0.38,-0.92,-1.00,-0.38,-0.98,-1.00,-0.20,-0.98,1.00,-0.20,-0.98,-1.00,-0.20,-1.00,-1.00,-0.00,-1.00,1.00,0.00,-1.00,-1.00,-0.00,-0.98,-1.00,0.20,-0.98,1.00,0.20,-0.98,-1.00,0.20,-0.92,-1.00,0.38,-0.92,1.00,0.38,-0.92,-1.00,0.38,-0.83,-1.00,0.56,-0.83,1.00,0.56,-0.83,-1.00,0.56,-0.71,-1.00,0.71,-0.71,1.00,0.71,-0.71,-1.00,0.71,-0.56,-1.00,0.83,-0.56,1.00,0.83,-0.56,-1.00,0.83,-0.38,-1.00,0.92,-0.38,1.00,0.92,-0.38,-1.00,0.92,-0.20,-1.00,0.98,-0.20,1.00,0.98,-0.20,-1.00,0.98,-0.00,-1.00,1.00,0.00,1.00,1.00,-0.00,-1.00,1.00,0.20,-1.00,0.98,0.20,1.00,0.98,0.20,-1.00,0.98,0.38,-1.00,0.92,0.38,1.00,0.92,0.38,-1.00,0.92,0.56,-1.00,0.83,0.71,-1.00,0.71,0.71,1.00,0.71,0.56,1.00,0.83</positions>
			<normals>-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.77,-0.00,0.63,0.77,-0.00,0.63,0.77,-0.00,0.63,0.88,-0.00,0.47,0.88,-0.00,0.47,0.88,-0.00,0.47,0.96,0.00,0.29,0.96,0.00,0.29,0.96,0.00,0.29,1.00,0.00,0.10,1.00,0.00,0.10,1.00,0.00,0.10,1.00,0.00,-0.10,1.00,0.00,-0.10,1.00,0.00,-0.10,0.96,0.00,-0.29,0.96,0.00,-0.29,0.96,0.00,-0.29,0.88,0.00,-0.47,0.88,0.00,-0.47,0.88,0.00,-0.47,0.77,0.00,-0.63,0.77,0.00,-0.63,0.77,0.00,-0.63,0.63,0.00,-0.77,0.63,0.00,-0.77,0.63,0.00,-0.77,0.47,0.00,-0.88,0.47,0.00,-0.88,0.47,0.00,-0.88,0.29,0.00,-0.96,0.29,0.00,-0.96,0.29,0.00,-0.96,0.10,0.00,-1.00,0.10,0.00,-1.00,0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.29,0.00,-0.96,-0.29,0.00,-0.96,-0.29,0.00,-0.96,-0.47,0.00,-0.88,-0.47,0.00,-0.88,-0.47,0.00,-0.88,-0.63,0.00,-0.77,-0.63,0.00,-0.77,-0.63,0.00,-0.77,-0.77,0.00,-0.63,-0.77,0.00,-0.63,-0.77,0.00,-0.63,-0.88,0.00,-0.47,-0.88,0.00,-0.47,-0.88,0.00,-0.47,-0.96,0.00,-0.29,-0.96,0.00,-0.29,-0.96,0.00,-0.29,-1.00,0.00,-0.10,-1.00,0.00,-0.10,-1.00,0.00,-0.10,-1.00,0.00,0.10,-1.00,0.00,0.10,-1.00,0.00,0.10,-0.96,0.00,0.29,-0.96,0.00,0.29,-0.96,0.00,0.29,-0.88,-0.00,0.47,-0.88,-0.00,0.47,-0.88,-0.00,0.47,-0.77,-0.00,0.63,-0.77,-0.00,0.63,-0.77,-0.00,0.63,-0.63,-0.00,0.77,-0.63,-0.00,0.77,-0.63,-0.00,0.77,-0.47,-0.00,0.88,-0.47,-0.00,0.88,-0.47,-0.00,0.88,-0.29,-0.00,0.96,-0.29,-0.00,0.96,-0.29,-0.00,0.96,-0.10,-0.00,1.00,-0.10,-0.00,1.00,-0.10,-0.00,1.00,0.10,-0.00,1.00,0.10,-0.00,1.00,0.10,-0.00,1.00,0.29,-0.00,0.96,0.29,-0.00,0.96,0.29,-0.00,0.96,0.47,-0.00,0.88,0.47,-0.00,0.88,0.47,-0.00,0.88,0.63,-0.00,0.77,0.63,-0.00,0.77,0.63,-0.00,0.77</normals>;
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,</faces>
		</mesh>

		<material id="transparent" specular="0" shininess="0" reflectivity="0.1" shadow="false" alpha="0.01" color="red" />
		
		<material id="blue" specular="0" shininess="20" color="blue" />
		<material id="red" specular="0" shininess="20" color="red" />
		<material id="grid" specular="0" shininess="20">
			<texture id="grid-tex" src="grid.png" />
			<material_layer texture="#grid-tex" mapinput="UV1" scale_x="2" scale_y="2" scale_z="2" mapto="M_COLOR" />
		</material>

		<scene id="mainscene" ambient_color="#555" camera="#mainCamera" background_color="#338">
			<!-- original -->
			<camera id="mainCamera" loc_z="140" loc_y="150" fov_y="50" rot_x="0" />
			<!-- right -->
			<!--camera id="mainCamera" loc_z="7" loc_y="0.28" loc_x="0" fov_y="35" rot_x="0" /-->
			<!-- left -->
			<!--camera id="mainCamera" loc_z="-7" loc_y="1" loc_x="0" fov_y="35" rot_y="-3.14" /-->
			<!-- top -->
			<!--camera id="mainCamera" loc_z="0" loc_y="150" fov_y="35" rot_x="-1.57" /-->
			
			<object id="groundObject" mesh="#groundMesh" material="#grid" scale="500" />
			<object id="roofObject" mesh="#groundMesh" material="#grid" scale="500" />
			<object id="backWall" mesh="#groundMesh" material="#grid" scale="500" loc_z="-100" rot_x="-1.57" />
			<object id="leftWall" mesh="#groundMesh" material="#grid" scale="500" rot_z="-1.57" loc_x="-50" />
			<object id="rightWall" mesh="#groundMesh" material="#grid" scale="500" rot_z="-1.57" loc_x="50" />

			<object id="ball1Obj" mesh="#Sphere" material="#red" loc_x="0" loc_y="10" scale="20" />
			<object id="ball2Obj" mesh="#Sphere" material="#blue" loc_x="40" loc_y="10" scale="20" />
			<object id="ball3Obj" mesh="#Sphere" material="#blue" loc_x="80" loc_y="10" scale="20" />
			<object id="ball4Obj" mesh="#Sphere" material="#blue" loc_x="120" loc_y="10" scale="20" />
			<object id="ball5Obj" mesh="#Sphere" material="#blue" loc_x="160" loc_y="10" scale="20" />

			<light id="light1" loc_x="-40" loc_y="150" loc_z="0" attenuation_quadratic="0.00001" attenuation_linear="0.00000001" attenuation_constant="1" type="L_POINT" />
		
			<light id="light2" loc_x="40" loc_y="150" loc_z="-70" attenuation_quadratic="0.00001" attenuation_linear="0.00000001" attenuation_constant="1.5" type="L_POINT" />
			
		</scene>
	</glge>
</script> 
<script><!--

	
	var canvas = document.getElementById( 'canvas' )
	var renderer = new GLGE.Renderer( canvas );
	var system;
	var start, stop;
	var JConstraintPoint=jigLib.JConstraintPoint;
	var Vector3DUtil=jigLib.Vector3DUtil;
	
	var XMLdoc = new GLGE.Document();
	
	XMLdoc.onLoad = function(){
		// the GLGE scene
		var scene = XMLdoc.getElement( "mainscene" );
		renderer.setScene( scene );
		renderer.render();
		
		// references to GLGE scene objects defined in the XML above
		var blue = XMLdoc.getElement("blue");
		var red = XMLdoc.getElement("red");
		var smesh = XMLdoc.getElement("Sphere");
		var cmesh = XMLdoc.getElement("Cube");
		var cymesh = XMLdoc.getElement("Cylinder");
		var groundObj = XMLdoc.getElement("groundObject");
		var roofObj = XMLdoc.getElement("roofObject");
		var bWallObj = XMLdoc.getElement("backWall");
		var lWallObj = XMLdoc.getElement("leftWall");
		var rWallObj = XMLdoc.getElement("rightWall");
		
		var ball1 = XMLdoc.getElement("ball1Obj");
		var ball2 = XMLdoc.getElement("ball2Obj");
		var ball3 = XMLdoc.getElement("ball3Obj");
		var ball4 = XMLdoc.getElement("ball4Obj");
		var ball5 = XMLdoc.getElement("ball5Obj");
		
		var camera = XMLdoc.getElement("mainCamera");
		
		// user interaction event handlers
		document.onkeydown = function(e){
			switch(e.keyCode)
			{
				case 32:
					jball1.setActive();
					//jball1.addWorldForce([0,10000,0,0], [0,0,0,0]);
					//jball1.applyWorldImpulse([0,200,0,0], [0,0,0,0]);
					jball1._currState.linVelocity[1]=80;
					break;
				case 38:
					jball1.setActive();
					jball1._currState.linVelocity[2]=-80;
					//jball1.setVelocity([0,0,-20,0]);
					//jball1.addWorldForce([0,0,-20000,0], [0,0,0,0]);
					//jball1.applyWorldImpulse([0,0,-2000,0], [0,0,0,0]);
					break;
				case 40:
					jball1.setActive();
					jball1._currState.linVelocity[2]=80;
					//jball1.setVelocity([0,0,20,0]);
					//jball1.addWorldForce([0,0,20000,0], [0,0,0,0]);
					//jball1.applyWorldImpulse([0,0,2000,0], [0,0,0,0]);
					break;
				case 37:
					jball1.setActive();
					jball1._currState.linVelocity[0]=-80;
					//jball1.setVelocity([-20,0,0,0]);
					//jball1.addWorldForce([-20000,0,0,0], [0,0,0,0]);
					//jball1.applyWorldImpulse([-2000,0,0,0], [0,0,0,0]);
					break;
				case 39:
					jball1.setActive();
					jball1._currState.linVelocity[0]=80;
					//jball1.setVelocity([20,0,0,0]);
					//jball1.addWorldForce([20000,0,0,0], [0,0,0,0]);
					//jball1.applyWorldImpulse([2000,0,0,0], [0,0,0,0]);
					break;
			}
		}
		
		document.onkeyup = function( e ){
			return; // not currently used in this demo
			switch(e.keyCode)
			{
			case 32:
				break;
			case 38:
				break;
			case 40:
				break;
			case 37:
				break;
			case 39:
				break;
			}
		}
		
		canvas.onmouseup = function( e ){
			return; // not currently used in this demo
		}
		canvas.onmousewheel = function( e ){
			return; // not currently used in this demo
		}
		
		// array of links between JigLib objects and GLGE scene objects
		var links=[];
		
		// reference to the JigLibJS physics system singleton
		system=jigLib.PhysicsSystem.getInstance();
		system.setGravity([0,-9.8,0,0]);
		
		// initial JigLib bodies matching the GLGE objects added in the XML above
		var ground=new jigLib.JPlane(null,[0, 1, 0, 0]);
		ground.set_friction(0);
		system.addBody(ground);
		
		var roof=new jigLib.JPlane(null,[0, -1, 0, 0]);
		roof.set_friction(0);
		roof.set_y(500);
		system.addBody(roof);
	
		var lWall=new jigLib.JPlane(null,[0,1,0]);
		lWall.set_friction(0);
		lWall.set_x(-500);
		lWall.set_rotationZ(-88.85);
		system.addBody(lWall);
	
		var rWall=new jigLib.JPlane(null,[0,1,0]);
		rWall.set_friction(0);
		rWall.set_x(500);
		rWall.set_rotationZ(-88.85);
		system.addBody(rWall);
	
		var bWall=new jigLib.JPlane(null,[0,1,0]);
		bWall.set_friction(0);
		bWall.set_rotationX(88.85);
		bWall.set_z(-500);
		system.addBody(bWall);
	
		var fWall=new jigLib.JPlane(null,[0,-1,0]);
		fWall.set_friction(0);
		fWall.set_rotationX(-88.85);
		fWall.set_z(-20);
		system.addBody(fWall);
		
		var jball1=new jigLib.JSphere(null,20);
		jball1.set_y(100);
		jball1.set_z(-200);
		jball1.set_mass(20);
		jball1.set_friction(0);
		system.addBody(jball1);
		
		var jball2=new jigLib.JSphere(null,20);
		jball2.set_x(40);
		jball2.set_y(100);
		jball2.set_z(-200);
		jball2.set_mass(20);
		jball2.set_friction(0);
		system.addBody(jball2);
		
		var jball3=new jigLib.JSphere(null,20);
		jball3.set_x(80);
		jball3.set_y(100);
		jball3.set_z(-200);
		jball3.set_mass(20);
		jball3.set_friction(0);
		system.addBody(jball3);
		
		var jball4=new jigLib.JSphere(null,20);
		jball4.set_x(120);
		jball4.set_y(100);
		jball4.set_z(-200);
		jball4.set_mass(20);
		jball4.set_friction(0);
		system.addBody(jball4);
		
		var jball5=new jigLib.JSphere(null,20);
		jball5.set_x(160);
		jball5.set_y(100);
		jball5.set_z(-200);
		jball5.set_mass(20);
		jball5.set_friction(0);
		system.addBody(jball5);
		
		var balls=[jball1,jball2,jball3,jball4,jball5];
		
		// add the JigLibJS constraints
		var pos1, pos2, b1, b2, chain=[];
		for (i=1,l=balls.length; i<l; i++)
		{
			b1=balls[i]; 
			b2=balls[i-1];
			pos1 = Vector3DUtil.Y_AXIS.slice();
			pos2 = Vector3DUtil.Y_AXIS.slice();
			Vector3DUtil.scaleBy(pos1, -b2.get_boundingSphere());
			Vector3DUtil.scaleBy(pos2, b1.get_boundingSphere());
			chain[i] = new JConstraintPoint(b2, pos1, b1, pos2, 2.5, 1);
			system.addConstraint(chain[i]);
		}
		
		// link the GLGE scene objects to the jiglib bodies
		links.push({glge:groundObj,jig:ground});
		links.push({glge:roofObj,jig:roof});
		links.push({glge:bWallObj,jig:bWall});
		links.push({glge:lWallObj,jig:lWall});
		links.push({glge:rWallObj,jig:rWall});
		links.push({glge:ball1,jig:jball1});
		links.push({glge:ball2,jig:jball2});
		links.push({glge:ball3,jig:jball3});
		links.push({glge:ball4,jig:jball4});
		links.push({glge:ball5,jig:jball5});
		
		var lasttime=(new Date()).getTime();
		var renderCount;
		
		// renders the scene
		function render(){
			renderCount++;
			var now=(new Date()).getTime();
			var inttime=(now-lasttime)/1000;
			if (inttime<0.05) inttime=0.05;
			system.integrate((now-lasttime)/1000);
			lasttime=now;
			
			for(var i=0; i<links.length;i++){
				links[i].glge.setLocY(links[i].jig.get_currentState().position[1]);
				links[i].glge.setLocX(links[i].jig.get_currentState().position[0]);
				links[i].glge.setLocZ(links[i].jig.get_currentState().position[2]);
				var ori=GLGE.Mat4(links[i].jig.get_currentState().get_orientation().glmatrix);
				links[i].glge.setRotMatrix(ori);
			}
			
			renderer.render();
		}
	
		setInterval(render,30);
	}
	
	XMLdoc.parseScript("glge_document");

--></script> 

</div>
</body>
</html>

