<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>

<title>jigLib benchmarking / regression test: gravity field effect</title>
<script type="text/javascript" src="slider/range.js"></script>
<script type="text/javascript" src="slider/timer.js"></script>
<script type="text/javascript" src="slider/slider.js"></script>
<link type="text/css" rel="StyleSheet" href="slider/winclassic.css" />

<script type="text/javascript" src="jiglib/jiglib.all.min.js"></script>
<script type="text/javascript" src="glge/glge-compiled-min.js"></script>
<style>
	body {
		margin: auto;
		background-color: #888;
		padding-top: 50px;
		font-family: sans;
		color: #666;
		font-size: 0.8em
	}
	
	#container {
		margin: auto;
		width: 900px;
		padding: 10px;
		background-color: #fff;
		border-radius: 5px;
		-webkit-box-shadow: 5px 5px 2px #444;
	}
</style>
</head>
<body>


<div id="container">
	<canvas id="canvas" width="900" height="400"></canvas>
	
	<h2>Gravity Field Effect</h2>
	This is a regression test for the GravityField effect.<br />
	<br />
	<!-- divs for echoing test output and debug information -->
	<div id="details" style="width: 100%">
	<div id="debug" style="width: 50%; float: left;"></div>
	<div id="debug2" style="width: 50%; float: left;"></div>
	<div style="clear: both;"></div>
</div>


<!-- GLGE scene definitions (meshes, objects, lights, cameras etc.) -->
<script id="glge_document" type="text/xml">
	<glge>

		<mesh id="groundMesh">
			<positions>1.00,-0.00,1.00,-1.00,-0.00,1.00,-1.00,0.00,-1.00,1.00,-0.00,1.00,-1.00,0.00,-1.00,1.00,0.00,-1.00</positions>
			<normals>-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00</normals>;
			<uv1>1.00,1.00,0.00,1.00,0.00,0.00,1.00,1.00,0.00,0.00,1.00,0.00</uv1>
			<faces>0,1,2,3,4,5,</faces>
		</mesh>
		
		<mesh id="Sphere">
			<positions>0.262869,-0.809012,-0.525738,0.425323,-0.309011,-0.850654,0.723600,-0.525720,-0.447215,0.425323,-0.309011,-0.850654,0.262869,-0.809012,-0.525738,-0.162456,-0.499995,-0.850654,-0.276385,-0.850640,-0.447215,-0.162456,-0.499995,-0.850654,0.262869,-0.809012,-0.525738,-0.162456,-0.499995,-0.850654,0.000000,0.000000,-1.000000,0.425323,-0.309011,-0.850654,0.850648,0.000000,-0.525736,0.723600,-0.525720,-0.447215,0.425323,-0.309011,-0.850654,0.425323,-0.309011,-0.850654,0.425323,0.309011,-0.850654,0.850648,0.000000,-0.525736,0.723600,0.525720,-0.447215,0.850648,0.000000,-0.525736,0.425323,0.309011,-0.850654,0.425323,-0.309011,-0.850654,0.000000,0.000000,-1.000000,0.425323,0.309011,-0.850654,-0.688189,-0.499997,-0.525736,-0.162456,-0.499995,-0.850654,-0.276385,-0.850640,-0.447215,-0.162456,-0.499995,-0.850654,-0.688189,-0.499997,-0.525736,-0.525730,0.000000,-0.850652,-0.894425,0.000000,-0.447215,-0.525730,0.000000,-0.850652,-0.688189,-0.499997,-0.525736,-0.525730,0.000000,-0.850652,0.000000,0.000000,-1.000000,-0.162456,-0.499995,-0.850654,-0.688189,0.499997,-0.525736,-0.525730,0.000000,-0.850652,-0.894425,0.000000,-0.447215,-0.525730,0.000000,-0.850652,-0.688189,0.499997,-0.525736,-0.162456,0.499995,-0.850654,-0.276385,0.850640,-0.447215,-0.162456,0.499995,-0.850654,-0.688189,0.499997,-0.525736,-0.162456,0.499995,-0.850654,0.000000,0.000000,-1.000000,-0.525730,0.000000,-0.850652,0.262869,0.809012,-0.525738,-0.162456,0.499995,-0.850654,-0.276385,0.850640,-0.447215,-0.162456,0.499995,-0.850654,0.262869,0.809012,-0.525738,0.425323,0.309011,-0.850654,0.723600,0.525720,-0.447215,0.425323,0.309011,-0.850654,0.262869,0.809012,-0.525738,0.425323,0.309011,-0.850654,0.000000,0.000000,-1.000000,-0.162456,0.499995,-0.850654,0.951058,-0.309013,0.000000,0.723600,-0.525720,-0.447215,0.850648,0.000000,-0.525736,0.850648,0.000000,-0.525736,0.951058,0.309013,0.000000,0.951058,-0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,-0.309013,0.000000,0.951058,0.309013,0.000000,0.951058,0.309013,0.000000,0.850648,0.000000,-0.525736,0.723600,0.525720,-0.447215,0.000000,-1.000000,0.000000,-0.276385,-0.850640,-0.447215,0.262869,-0.809012,-0.525738,0.262869,-0.809012,-0.525738,0.587786,-0.809017,0.000000,0.000000,-1.000000,0.000000,0.276385,-0.850640,0.447215,0.000000,-1.000000,0.000000,0.587786,-0.809017,0.000000,0.587786,-0.809017,0.000000,0.262869,-0.809012,-0.525738,0.723600,-0.525720,-0.447215,-0.951058,-0.309013,0.000000,-0.894425,0.000000,-0.447215,-0.688189,-0.499997,-0.525736,-0.688189,-0.499997,-0.525736,-0.587786,-0.809017,0.000000,-0.951058,-0.309013,0.000000,-0.723600,-0.525720,0.447215,-0.951058,-0.309013,0.000000,-0.587786,-0.809017,0.000000,-0.587786,-0.809017,0.000000,-0.688189,-0.499997,-0.525736,-0.276385,-0.850640,-0.447215,-0.587786,0.809017,0.000000,-0.276385,0.850640,-0.447215,-0.688189,0.499997,-0.525736,-0.688189,0.499997,-0.525736,-0.951058,0.309013,0.000000,-0.587786,0.809017,0.000000,-0.723600,0.525720,0.447215,-0.587786,0.809017,0.000000,-0.951058,0.309013,0.000000,-0.951058,0.309013,0.000000,-0.688189,0.499997,-0.525736,-0.894425,0.000000,-0.447215,0.587786,0.809017,0.000000,0.723600,0.525720,-0.447215,0.262869,0.809012,-0.525738,0.262869,0.809012,-0.525738,0.000000,1.000000,0.000000,0.587786,0.809017,0.000000,0.276385,0.850640,0.447215,0.587786,0.809017,0.000000,0.000000,1.000000,0.000000,0.000000,1.000000,0.000000,0.262869,0.809012,-0.525738,-0.276385,0.850640,-0.447215,0.688189,-0.499997,0.525736,0.951058,-0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,-0.309013,0.000000,0.688189,-0.499997,0.525736,0.587786,-0.809017,0.000000,0.276385,-0.850640,0.447215,0.587786,-0.809017,0.000000,0.688189,-0.499997,0.525736,0.587786,-0.809017,0.000000,0.723600,-0.525720,-0.447215,0.951058,-0.309013,0.000000,-0.262869,-0.809012,0.525738,0.000000,-1.000000,0.000000,0.276385,-0.850640,0.447215,0.000000,-1.000000,0.000000,-0.262869,-0.809012,0.525738,-0.587786,-0.809017,0.000000,-0.723600,-0.525720,0.447215,-0.587786,-0.809017,0.000000,-0.262869,-0.809012,0.525738,-0.587786,-0.809017,0.000000,-0.276385,-0.850640,-0.447215,0.000000,-1.000000,0.000000,-0.850648,0.000000,0.525736,-0.951058,-0.309013,0.000000,-0.723600,-0.525720,0.447215,-0.951058,-0.309013,0.000000,-0.850648,0.000000,0.525736,-0.951058,0.309013,0.000000,-0.723600,0.525720,0.447215,-0.951058,0.309013,0.000000,-0.850648,0.000000,0.525736,-0.951058,0.309013,0.000000,-0.894425,0.000000,-0.447215,-0.951058,-0.309013,0.000000,-0.262869,0.809012,0.525738,-0.587786,0.809017,0.000000,-0.723600,0.525720,0.447215,-0.587786,0.809017,0.000000,-0.262869,0.809012,0.525738,0.000000,1.000000,0.000000,0.276385,0.850640,0.447215,0.000000,1.000000,0.000000,-0.262869,0.809012,0.525738,0.000000,1.000000,0.000000,-0.276385,0.850640,-0.447215,-0.587786,0.809017,0.000000,0.688189,0.499997,0.525736,0.587786,0.809017,0.000000,0.276385,0.850640,0.447215,0.587786,0.809017,0.000000,0.688189,0.499997,0.525736,0.951058,0.309013,0.000000,0.894425,0.000000,0.447215,0.951058,0.309013,0.000000,0.688189,0.499997,0.525736,0.951058,0.309013,0.000000,0.723600,0.525720,-0.447215,0.587786,0.809017,0.000000,0.162456,-0.499995,0.850654,0.276385,-0.850640,0.447215,0.688189,-0.499997,0.525736,0.688189,-0.499997,0.525736,0.525730,0.000000,0.850652,0.162456,-0.499995,0.850654,0.000000,0.000000,1.000000,0.162456,-0.499995,0.850654,0.525730,0.000000,0.850652,0.525730,0.000000,0.850652,0.688189,-0.499997,0.525736,0.894425,0.000000,0.447215,-0.425323,-0.309011,0.850654,-0.723600,-0.525720,0.447215,-0.262869,-0.809012,0.525738,-0.262869,-0.809012,0.525738,0.162456,-0.499995,0.850654,-0.425323,-0.309011,0.850654,0.000000,0.000000,1.000000,-0.425323,-0.309011,0.850654,0.162456,-0.499995,0.850654,0.162456,-0.499995,0.850654,-0.262869,-0.809012,0.525738,0.276385,-0.850640,0.447215,-0.425323,0.309011,0.850654,-0.723600,0.525720,0.447215,-0.850648,0.000000,0.525736,-0.850648,0.000000,0.525736,-0.425323,-0.309011,0.850654,-0.425323,0.309011,0.850654,0.000000,0.000000,1.000000,-0.425323,0.309011,0.850654,-0.425323,-0.309011,0.850654,-0.425323,-0.309011,0.850654,-0.850648,0.000000,0.525736,-0.723600,-0.525720,0.447215,0.162456,0.499995,0.850654,0.276385,0.850640,0.447215,-0.262869,0.809012,0.525738,-0.262869,0.809012,0.525738,-0.425323,0.309011,0.850654,0.162456,0.499995,0.850654,0.000000,0.000000,1.000000,0.162456,0.499995,0.850654,-0.425323,0.309011,0.850654,-0.425323,0.309011,0.850654,-0.262869,0.809012,0.525738,-0.723600,0.525720,0.447215,0.525730,0.000000,0.850652,0.894425,0.000000,0.447215,0.688189,0.499997,0.525736,0.688189,0.499997,0.525736,0.162456,0.499995,0.850654,0.525730,0.000000,0.850652,0.000000,0.000000,1.000000,0.525730,0.000000,0.850652,0.162456,0.499995,0.850654,0.162456,0.499995,0.850654,0.688189,0.499997,0.525736,0.276385,0.850640,0.447215</positions>
			<normals>0.262856,-0.808985,-0.525712,0.425306,-0.309000,-0.850642,0.723594,-0.525712,-0.447188,0.425306,-0.309000,-0.850642,0.262856,-0.808985,-0.525712,-0.162450,-0.499985,-0.850642,-0.276376,-0.850642,-0.447188,-0.162450,-0.499985,-0.850642,0.262856,-0.808985,-0.525712,-0.162450,-0.499985,-0.850642,0.000000,0.000000,-1.000000,0.425306,-0.309000,-0.850642,0.850642,0.000000,-0.525712,0.723594,-0.525712,-0.447188,0.425306,-0.309000,-0.850642,0.425306,-0.309000,-0.850642,0.425306,0.309000,-0.850642,0.850642,0.000000,-0.525712,0.723594,0.525712,-0.447188,0.850642,0.000000,-0.525712,0.425306,0.309000,-0.850642,0.425306,-0.309000,-0.850642,0.000000,0.000000,-1.000000,0.425306,0.309000,-0.850642,-0.688162,-0.499985,-0.525712,-0.162450,-0.499985,-0.850642,-0.276376,-0.850642,-0.447188,-0.162450,-0.499985,-0.850642,-0.688162,-0.499985,-0.525712,-0.525712,0.000000,-0.850642,-0.894406,0.000000,-0.447188,-0.525712,0.000000,-0.850642,-0.688162,-0.499985,-0.525712,-0.525712,0.000000,-0.850642,0.000000,0.000000,-1.000000,-0.162450,-0.499985,-0.850642,-0.688162,0.499985,-0.525712,-0.525712,0.000000,-0.850642,-0.894406,0.000000,-0.447188,-0.525712,0.000000,-0.850642,-0.688162,0.499985,-0.525712,-0.162450,0.499985,-0.850642,-0.276376,0.850642,-0.447188,-0.162450,0.499985,-0.850642,-0.688162,0.499985,-0.525712,-0.162450,0.499985,-0.850642,0.000000,0.000000,-1.000000,-0.525712,0.000000,-0.850642,0.262856,0.808985,-0.525712,-0.162450,0.499985,-0.850642,-0.276376,0.850642,-0.447188,-0.162450,0.499985,-0.850642,0.262856,0.808985,-0.525712,0.425306,0.309000,-0.850642,0.723594,0.525712,-0.447188,0.425306,0.309000,-0.850642,0.262856,0.808985,-0.525712,0.425306,0.309000,-0.850642,0.000000,0.000000,-1.000000,-0.162450,0.499985,-0.850642,0.951048,-0.309000,0.000000,0.723594,-0.525712,-0.447188,0.850642,0.000000,-0.525712,0.850642,0.000000,-0.525712,0.951048,0.309000,0.000000,0.951048,-0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,-0.309000,0.000000,0.951048,0.309000,0.000000,0.951048,0.309000,0.000000,0.850642,0.000000,-0.525712,0.723594,0.525712,-0.447188,0.000000,-1.000000,0.000000,-0.276376,-0.850642,-0.447188,0.262856,-0.808985,-0.525712,0.262856,-0.808985,-0.525712,0.587756,-0.809015,0.000000,0.000000,-1.000000,0.000000,0.276376,-0.850642,0.447188,0.000000,-1.000000,0.000000,0.587756,-0.809015,0.000000,0.587756,-0.809015,0.000000,0.262856,-0.808985,-0.525712,0.723594,-0.525712,-0.447188,-0.951048,-0.309000,0.000000,-0.894406,0.000000,-0.447188,-0.688162,-0.499985,-0.525712,-0.688162,-0.499985,-0.525712,-0.587756,-0.809015,0.000000,-0.951048,-0.309000,0.000000,-0.723594,-0.525712,0.447188,-0.951048,-0.309000,0.000000,-0.587756,-0.809015,0.000000,-0.587756,-0.809015,0.000000,-0.688162,-0.499985,-0.525712,-0.276376,-0.850642,-0.447188,-0.587756,0.809015,0.000000,-0.276376,0.850642,-0.447188,-0.688162,0.499985,-0.525712,-0.688162,0.499985,-0.525712,-0.951048,0.309000,0.000000,-0.587756,0.809015,0.000000,-0.723594,0.525712,0.447188,-0.587756,0.809015,0.000000,-0.951048,0.309000,0.000000,-0.951048,0.309000,0.000000,-0.688162,0.499985,-0.525712,-0.894406,0.000000,-0.447188,0.587756,0.809015,0.000000,0.723594,0.525712,-0.447188,0.262856,0.808985,-0.525712,0.262856,0.808985,-0.525712,0.000000,1.000000,0.000000,0.587756,0.809015,0.000000,0.276376,0.850642,0.447188,0.587756,0.809015,0.000000,0.000000,1.000000,0.000000,0.000000,1.000000,0.000000,0.262856,0.808985,-0.525712,-0.276376,0.850642,-0.447188,0.688162,-0.499985,0.525712,0.951048,-0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,-0.309000,0.000000,0.688162,-0.499985,0.525712,0.587756,-0.809015,0.000000,0.276376,-0.850642,0.447188,0.587756,-0.809015,0.000000,0.688162,-0.499985,0.525712,0.587756,-0.809015,0.000000,0.723594,-0.525712,-0.447188,0.951048,-0.309000,0.000000,-0.262856,-0.808985,0.525712,0.000000,-1.000000,0.000000,0.276376,-0.850642,0.447188,0.000000,-1.000000,0.000000,-0.262856,-0.808985,0.525712,-0.587756,-0.809015,0.000000,-0.723594,-0.525712,0.447188,-0.587756,-0.809015,0.000000,-0.262856,-0.808985,0.525712,-0.587756,-0.809015,0.000000,-0.276376,-0.850642,-0.447188,0.000000,-1.000000,0.000000,-0.850642,0.000000,0.525712,-0.951048,-0.309000,0.000000,-0.723594,-0.525712,0.447188,-0.951048,-0.309000,0.000000,-0.850642,0.000000,0.525712,-0.951048,0.309000,0.000000,-0.723594,0.525712,0.447188,-0.951048,0.309000,0.000000,-0.850642,0.000000,0.525712,-0.951048,0.309000,0.000000,-0.894406,0.000000,-0.447188,-0.951048,-0.309000,0.000000,-0.262856,0.808985,0.525712,-0.587756,0.809015,0.000000,-0.723594,0.525712,0.447188,-0.587756,0.809015,0.000000,-0.262856,0.808985,0.525712,0.000000,1.000000,0.000000,0.276376,0.850642,0.447188,0.000000,1.000000,0.000000,-0.262856,0.808985,0.525712,0.000000,1.000000,0.000000,-0.276376,0.850642,-0.447188,-0.587756,0.809015,0.000000,0.688162,0.499985,0.525712,0.587756,0.809015,0.000000,0.276376,0.850642,0.447188,0.587756,0.809015,0.000000,0.688162,0.499985,0.525712,0.951048,0.309000,0.000000,0.894406,0.000000,0.447188,0.951048,0.309000,0.000000,0.688162,0.499985,0.525712,0.951048,0.309000,0.000000,0.723594,0.525712,-0.447188,0.587756,0.809015,0.000000,0.162450,-0.499985,0.850642,0.276376,-0.850642,0.447188,0.688162,-0.499985,0.525712,0.688162,-0.499985,0.525712,0.525712,0.000000,0.850642,0.162450,-0.499985,0.850642,0.000000,0.000000,1.000000,0.162450,-0.499985,0.850642,0.525712,0.000000,0.850642,0.525712,0.000000,0.850642,0.688162,-0.499985,0.525712,0.894406,0.000000,0.447188,-0.425306,-0.309000,0.850642,-0.723594,-0.525712,0.447188,-0.262856,-0.808985,0.525712,-0.262856,-0.808985,0.525712,0.162450,-0.499985,0.850642,-0.425306,-0.309000,0.850642,0.000000,0.000000,1.000000,-0.425306,-0.309000,0.850642,0.162450,-0.499985,0.850642,0.162450,-0.499985,0.850642,-0.262856,-0.808985,0.525712,0.276376,-0.850642,0.447188,-0.425306,0.309000,0.850642,-0.723594,0.525712,0.447188,-0.850642,0.000000,0.525712,-0.850642,0.000000,0.525712,-0.425306,-0.309000,0.850642,-0.425306,0.309000,0.850642,0.000000,0.000000,1.000000,-0.425306,0.309000,0.850642,-0.425306,-0.309000,0.850642,-0.425306,-0.309000,0.850642,-0.850642,0.000000,0.525712,-0.723594,-0.525712,0.447188,0.162450,0.499985,0.850642,0.276376,0.850642,0.447188,-0.262856,0.808985,0.525712,-0.262856,0.808985,0.525712,-0.425306,0.309000,0.850642,0.162450,0.499985,0.850642,0.000000,0.000000,1.000000,0.162450,0.499985,0.850642,-0.425306,0.309000,0.850642,-0.425306,0.309000,0.850642,-0.262856,0.808985,0.525712,-0.723594,0.525712,0.447188,0.525712,0.000000,0.850642,0.894406,0.000000,0.447188,0.688162,0.499985,0.525712,0.688162,0.499985,0.525712,0.162450,0.499985,0.850642,0.525712,0.000000,0.850642,0.000000,0.000000,1.000000,0.525712,0.000000,0.850642,0.162450,0.499985,0.850642,0.162450,0.499985,0.850642,0.688162,0.499985,0.525712,0.276376,0.850642,0.447188</normals>
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239</faces>
		</mesh>
		
		<mesh id="Cube">
			<positions>1.000,1.000,1.000,1.000,1.000,-1.000,-1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,-1.000,1.000,-1.000,1.000,-1.000,-1.000,1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,1.000,1.000,-1.000,-1.000,1.000,1.000,-1.000,1.000,1.000,1.000,-1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,1.000,-1.000,-1.000,-1.000,-1.000,-1.000,1.000,-1.000</positions>
			<normals>0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,0.000,1.000,0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,-0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,-0.000,0.000,1.000,-0.000,0.000,1.000,-0.000,0.000,-0.000,-0.000,1.000,-0.000,-0.000,1.000,-0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,-0.000,1.000,0.000,0.000,-1.000,0.000,0.000,-1.000,0.000,0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000,0.000,-0.000,-1.000</normals>
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35</faces>
		</mesh>

		<mesh id="Cylinder">
			<positions>0.00,1.00,0.00,0.71,1.00,0.71,0.83,1.00,0.56,0.00,-1.00,-0.00,0.83,-1.00,0.56,0.71,-1.00,0.71,0.00,1.00,0.00,0.83,1.00,0.56,0.92,1.00,0.38,0.00,-1.00,-0.00,0.92,-1.00,0.38,0.83,-1.00,0.56,0.00,1.00,0.00,0.92,1.00,0.38,0.98,1.00,0.20,0.00,-1.00,-0.00,0.98,-1.00,0.20,0.92,-1.00,0.38,0.00,1.00,0.00,0.98,1.00,0.20,1.00,1.00,0.00,0.00,-1.00,-0.00,1.00,-1.00,-0.00,0.98,-1.00,0.20,0.00,1.00,0.00,1.00,1.00,0.00,0.98,1.00,-0.20,0.00,-1.00,-0.00,0.98,-1.00,-0.20,1.00,-1.00,-0.00,0.00,1.00,0.00,0.98,1.00,-0.20,0.92,1.00,-0.38,0.00,-1.00,-0.00,0.92,-1.00,-0.38,0.98,-1.00,-0.20,0.00,1.00,0.00,0.92,1.00,-0.38,0.83,1.00,-0.56,0.00,-1.00,-0.00,0.83,-1.00,-0.56,0.92,-1.00,-0.38,0.00,1.00,0.00,0.83,1.00,-0.56,0.71,1.00,-0.71,0.00,-1.00,-0.00,0.71,-1.00,-0.71,0.83,-1.00,-0.56,0.00,1.00,0.00,0.71,1.00,-0.71,0.56,1.00,-0.83,0.00,-1.00,-0.00,0.56,-1.00,-0.83,0.71,-1.00,-0.71,0.00,1.00,0.00,0.56,1.00,-0.83,0.38,1.00,-0.92,0.00,-1.00,-0.00,0.38,-1.00,-0.92,0.56,-1.00,-0.83,0.00,1.00,0.00,0.38,1.00,-0.92,0.20,1.00,-0.98,0.00,-1.00,-0.00,0.20,-1.00,-0.98,0.38,-1.00,-0.92,0.00,1.00,0.00,0.20,1.00,-0.98,-0.00,1.00,-1.00,0.00,-1.00,-0.00,0.00,-1.00,-1.00,0.20,-1.00,-0.98,0.00,1.00,0.00,-0.00,1.00,-1.00,-0.20,1.00,-0.98,0.00,-1.00,-0.00,-0.20,-1.00,-0.98,0.00,-1.00,-1.00,0.00,1.00,0.00,-0.20,1.00,-0.98,-0.38,1.00,-0.92,0.00,-1.00,-0.00,-0.38,-1.00,-0.92,-0.20,-1.00,-0.98,0.00,1.00,0.00,-0.38,1.00,-0.92,-0.56,1.00,-0.83,0.00,-1.00,-0.00,-0.56,-1.00,-0.83,-0.38,-1.00,-0.92,0.00,1.00,0.00,-0.56,1.00,-0.83,-0.71,1.00,-0.71,0.00,-1.00,-0.00,-0.71,-1.00,-0.71,-0.56,-1.00,-0.83,0.00,1.00,0.00,-0.71,1.00,-0.71,-0.83,1.00,-0.56,0.00,-1.00,-0.00,-0.83,-1.00,-0.56,-0.71,-1.00,-0.71,0.00,1.00,0.00,-0.83,1.00,-0.56,-0.92,1.00,-0.38,0.00,-1.00,-0.00,-0.92,-1.00,-0.38,-0.83,-1.00,-0.56,0.00,1.00,0.00,-0.92,1.00,-0.38,-0.98,1.00,-0.20,0.00,-1.00,-0.00,-0.98,-1.00,-0.20,-0.92,-1.00,-0.38,0.00,1.00,0.00,-0.98,1.00,-0.20,-1.00,1.00,0.00,0.00,-1.00,-0.00,-1.00,-1.00,-0.00,-0.98,-1.00,-0.20,0.00,1.00,0.00,-1.00,1.00,0.00,-0.98,1.00,0.20,0.00,-1.00,-0.00,-0.98,-1.00,0.20,-1.00,-1.00,-0.00,0.00,1.00,0.00,-0.98,1.00,0.20,-0.92,1.00,0.38,0.00,-1.00,-0.00,-0.92,-1.00,0.38,-0.98,-1.00,0.20,0.00,1.00,0.00,-0.92,1.00,0.38,-0.83,1.00,0.56,0.00,-1.00,-0.00,-0.83,-1.00,0.56,-0.92,-1.00,0.38,0.00,1.00,0.00,-0.83,1.00,0.56,-0.71,1.00,0.71,0.00,-1.00,-0.00,-0.71,-1.00,0.71,-0.83,-1.00,0.56,0.00,1.00,0.00,-0.71,1.00,0.71,-0.56,1.00,0.83,0.00,-1.00,-0.00,-0.56,-1.00,0.83,-0.71,-1.00,0.71,0.00,1.00,0.00,-0.56,1.00,0.83,-0.38,1.00,0.92,0.00,-1.00,-0.00,-0.38,-1.00,0.92,-0.56,-1.00,0.83,0.00,1.00,0.00,-0.38,1.00,0.92,-0.20,1.00,0.98,0.00,-1.00,-0.00,-0.20,-1.00,0.98,-0.38,-1.00,0.92,0.00,1.00,0.00,-0.20,1.00,0.98,0.00,1.00,1.00,0.00,-1.00,-0.00,-0.00,-1.00,1.00,-0.20,-1.00,0.98,0.00,1.00,0.00,0.00,1.00,1.00,0.20,1.00,0.98,0.00,-1.00,-0.00,0.20,-1.00,0.98,-0.00,-1.00,1.00,0.00,1.00,0.00,0.20,1.00,0.98,0.38,1.00,0.92,0.00,-1.00,-0.00,0.38,-1.00,0.92,0.20,-1.00,0.98,0.00,1.00,0.00,0.38,1.00,0.92,0.56,1.00,0.83,0.00,-1.00,-0.00,0.56,-1.00,0.83,0.38,-1.00,0.92,0.56,1.00,0.83,0.71,1.00,0.71,0.00,1.00,0.00,0.00,-1.00,-0.00,0.71,-1.00,0.71,0.56,-1.00,0.83,0.71,1.00,0.71,0.71,-1.00,0.71,0.83,-1.00,0.56,0.83,1.00,0.56,0.83,-1.00,0.56,0.92,-1.00,0.38,0.92,1.00,0.38,0.92,-1.00,0.38,0.98,-1.00,0.20,0.98,1.00,0.20,0.98,-1.00,0.20,1.00,-1.00,-0.00,1.00,1.00,0.00,1.00,-1.00,-0.00,0.98,-1.00,-0.20,0.98,1.00,-0.20,0.98,-1.00,-0.20,0.92,-1.00,-0.38,0.92,1.00,-0.38,0.92,-1.00,-0.38,0.83,-1.00,-0.56,0.83,1.00,-0.56,0.83,-1.00,-0.56,0.71,-1.00,-0.71,0.71,1.00,-0.71,0.71,-1.00,-0.71,0.56,-1.00,-0.83,0.56,1.00,-0.83,0.56,-1.00,-0.83,0.38,-1.00,-0.92,0.38,1.00,-0.92,0.38,-1.00,-0.92,0.20,-1.00,-0.98,0.20,1.00,-0.98,0.20,-1.00,-0.98,0.00,-1.00,-1.00,-0.00,1.00,-1.00,0.00,-1.00,-1.00,-0.20,-1.00,-0.98,-0.20,1.00,-0.98,-0.20,-1.00,-0.98,-0.38,-1.00,-0.92,-0.38,1.00,-0.92,-0.38,-1.00,-0.92,-0.56,-1.00,-0.83,-0.56,1.00,-0.83,-0.56,-1.00,-0.83,-0.71,-1.00,-0.71,-0.71,1.00,-0.71,-0.71,-1.00,-0.71,-0.83,-1.00,-0.56,-0.83,1.00,-0.56,-0.83,-1.00,-0.56,-0.92,-1.00,-0.38,-0.92,1.00,-0.38,-0.92,-1.00,-0.38,-0.98,-1.00,-0.20,-0.98,1.00,-0.20,-0.98,-1.00,-0.20,-1.00,-1.00,-0.00,-1.00,1.00,0.00,-1.00,-1.00,-0.00,-0.98,-1.00,0.20,-0.98,1.00,0.20,-0.98,-1.00,0.20,-0.92,-1.00,0.38,-0.92,1.00,0.38,-0.92,-1.00,0.38,-0.83,-1.00,0.56,-0.83,1.00,0.56,-0.83,-1.00,0.56,-0.71,-1.00,0.71,-0.71,1.00,0.71,-0.71,-1.00,0.71,-0.56,-1.00,0.83,-0.56,1.00,0.83,-0.56,-1.00,0.83,-0.38,-1.00,0.92,-0.38,1.00,0.92,-0.38,-1.00,0.92,-0.20,-1.00,0.98,-0.20,1.00,0.98,-0.20,-1.00,0.98,-0.00,-1.00,1.00,0.00,1.00,1.00,-0.00,-1.00,1.00,0.20,-1.00,0.98,0.20,1.00,0.98,0.20,-1.00,0.98,0.38,-1.00,0.92,0.38,1.00,0.92,0.38,-1.00,0.92,0.56,-1.00,0.83,0.71,-1.00,0.71,0.71,1.00,0.71,0.56,1.00,0.83</positions>
			<normals>-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,-0.00,-1.00,0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,-0.00,1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,-1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,1.00,0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.00,-1.00,-0.00,0.77,-0.00,0.63,0.77,-0.00,0.63,0.77,-0.00,0.63,0.88,-0.00,0.47,0.88,-0.00,0.47,0.88,-0.00,0.47,0.96,0.00,0.29,0.96,0.00,0.29,0.96,0.00,0.29,1.00,0.00,0.10,1.00,0.00,0.10,1.00,0.00,0.10,1.00,0.00,-0.10,1.00,0.00,-0.10,1.00,0.00,-0.10,0.96,0.00,-0.29,0.96,0.00,-0.29,0.96,0.00,-0.29,0.88,0.00,-0.47,0.88,0.00,-0.47,0.88,0.00,-0.47,0.77,0.00,-0.63,0.77,0.00,-0.63,0.77,0.00,-0.63,0.63,0.00,-0.77,0.63,0.00,-0.77,0.63,0.00,-0.77,0.47,0.00,-0.88,0.47,0.00,-0.88,0.47,0.00,-0.88,0.29,0.00,-0.96,0.29,0.00,-0.96,0.29,0.00,-0.96,0.10,0.00,-1.00,0.10,0.00,-1.00,0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.10,0.00,-1.00,-0.29,0.00,-0.96,-0.29,0.00,-0.96,-0.29,0.00,-0.96,-0.47,0.00,-0.88,-0.47,0.00,-0.88,-0.47,0.00,-0.88,-0.63,0.00,-0.77,-0.63,0.00,-0.77,-0.63,0.00,-0.77,-0.77,0.00,-0.63,-0.77,0.00,-0.63,-0.77,0.00,-0.63,-0.88,0.00,-0.47,-0.88,0.00,-0.47,-0.88,0.00,-0.47,-0.96,0.00,-0.29,-0.96,0.00,-0.29,-0.96,0.00,-0.29,-1.00,0.00,-0.10,-1.00,0.00,-0.10,-1.00,0.00,-0.10,-1.00,0.00,0.10,-1.00,0.00,0.10,-1.00,0.00,0.10,-0.96,0.00,0.29,-0.96,0.00,0.29,-0.96,0.00,0.29,-0.88,-0.00,0.47,-0.88,-0.00,0.47,-0.88,-0.00,0.47,-0.77,-0.00,0.63,-0.77,-0.00,0.63,-0.77,-0.00,0.63,-0.63,-0.00,0.77,-0.63,-0.00,0.77,-0.63,-0.00,0.77,-0.47,-0.00,0.88,-0.47,-0.00,0.88,-0.47,-0.00,0.88,-0.29,-0.00,0.96,-0.29,-0.00,0.96,-0.29,-0.00,0.96,-0.10,-0.00,1.00,-0.10,-0.00,1.00,-0.10,-0.00,1.00,0.10,-0.00,1.00,0.10,-0.00,1.00,0.10,-0.00,1.00,0.29,-0.00,0.96,0.29,-0.00,0.96,0.29,-0.00,0.96,0.47,-0.00,0.88,0.47,-0.00,0.88,0.47,-0.00,0.88,0.63,-0.00,0.77,0.63,-0.00,0.77,0.63,-0.00,0.77</normals>;
			<faces>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,</faces>
		</mesh>

		<material id="transparent" specular="0" shininess="0" reflectivity="0.1" shadow="false" alpha="0.01" color="red" />
		
		<material id="blue" specular="0" shininess="20" color="blue" />
		<material id="red" specular="0" shininess="20" color="red" />
		<material id="grid" specular="0" shininess="20">
			<texture id="grid-tex" src="grid.png" />
			<material_layer texture="#grid-tex" mapinput="UV1" scale_x="2" scale_y="2" scale_z="2" mapto="M_COLOR" />
		</material>

		<scene id="mainscene" ambient_color="#555" camera="#mainCamera" background_color="#338">
			<!-- original -->
			<camera id="mainCamera" loc_z="140" loc_y="50" fov_y="50" rot_x="0" />
			<!-- right -->
			<!--camera id="mainCamera" loc_z="7" loc_y="0.28" loc_x="0" fov_y="35" rot_x="0" /-->
			<!-- left -->
			<!--camera id="mainCamera" loc_z="-7" loc_y="1" loc_x="0" fov_y="35" rot_y="-3.14" /-->
			<!-- top -->
			<!--camera id="mainCamera" loc_z="0" loc_y="150" fov_y="35" rot_x="-1.57" /-->
			
			<object id="groundObject" mesh="#groundMesh" material="#grid" scale="100" />
			<object id="roofObject" mesh="#groundMesh" material="#grid" scale="100" />
			<object id="backWall" mesh="#groundMesh" material="#grid" scale="100" loc_z="-100" rot_x="-1.57" />
			<object id="leftWall" mesh="#groundMesh" material="#grid" scale="100" rot_z="-1.57" loc_x="-50" />
			<object id="rightWall" mesh="#groundMesh" material="#grid" scale="100" rot_z="-1.57" loc_x="50" />
			
			<object id="leftSphere" mesh="#Sphere" material="#red" scale="10" />
			<object id="rightSphere" mesh="#Sphere" material="#red" scale="10" />

			<light id="light1" loc_x="-40" loc_y="150" loc_z="0" attenuation_quadratic="0.00001" attenuation_linear="0.00000001" attenuation_constant="1" type="L_POINT" />
		
			<light id="light2" loc_x="40" loc_y="150" loc_z="-70" attenuation_quadratic="0.00001" attenuation_linear="0.00000001" attenuation_constant="1.5" type="L_POINT" />
			
		</scene>
	</glge>
</script> 
<script>
<!--
	
	var canvas = document.getElementById( 'canvas' )
	var renderer = new GLGE.Renderer( canvas );
	var system;
	var start, stop;
	var leftGF, rightGF;
	
	var XMLdoc = new GLGE.Document();
	
	XMLdoc.onLoad = function(){
		// the GLGE scene
		var scene = XMLdoc.getElement( "mainscene" );
		renderer.setScene( scene );
		renderer.render();
		
		// references to GLGE scene objects defined in the XML above
		var blue = XMLdoc.getElement("blue");
		var smesh = XMLdoc.getElement("Sphere");
		var cmesh = XMLdoc.getElement("Cube");
		var cymesh = XMLdoc.getElement("Cylinder");
		var groundObj = XMLdoc.getElement("groundObject");
		var roofObj = XMLdoc.getElement("roofObject");
		var bWallObj = XMLdoc.getElement("backWall");
		var lWallObj = XMLdoc.getElement("leftWall");
		var rWallObj = XMLdoc.getElement("rightWall");
		var leftSphereObj = XMLdoc.getElement("leftSphere");
		var rightSphereObj = XMLdoc.getElement("rightSphere");
		var camera = XMLdoc.getElement("mainCamera");
	
		// user interaction event handlers
		document.onkeydown = function(e){
			return; // not currently used in this demo
			switch(e.keyCode)
			{
				case 32:
					break;
				case 38:
					break;
				case 40:
					break;
				case 37:
					break;
				case 39:
					break;
			}
		}
		
		document.onkeyup = function( e ){
			return; // not currently used in this demo
			switch(e.keyCode)
			{
			case 32:
				break;
			case 38:
				break;
			case 40:
				break;
			case 37:
				break;
			case 39:
				break;
			}
		}
		
		canvas.onmouseup = function( e ){
			return; // not currently used in this demo
		}
		canvas.onmousewheel = function( e ){
			return; // not currently used in this demo
		}
		
		// array of links between JigLib objects and GLGE scene objects
		var links=[];
		
		// scale to be applied to objects
		var rad=2;
		
		// adds objects to the scene
		function addObjects(shape) {
			var c=2;
			var s=(shape=='spheres') ? rad : rad*1.2;
			var i=c;
			do {
				var ii=c;
				do {
					var iii=c;
					do {
						switch(shape) 
						{
							case 'spheres': addSphere(ii*s,180-i*s,iii*s); break;
							case 'cubes': addCube(ii*s,180-i*s,iii*s); break;
							case 'capsules': addCylinder(ii*s,180-i*s,iii*s); break;
						}
					} while(iii--);
				} while(ii--);
			} while(i--);
			return true;
		}
	
		// removes all JigLib and GLGE objects from the scene
		function clearObjects() {
			var i=links.length-1;
			var obj;
			do {
				if (links[i].type!='temporary')
					continue;
				obj=links.pop();
				if (obj.type=='temporary')
				{
					scene.removeChild(obj.glge);
					system.removeBody(obj.jig);
					obj.glge=obj.jig=null;
					obj=null;
				}
			} while(i--);
		}
		
		// adds a sphere to the scene
		var addSphere=function(x,y,z){
			var newObject=new GLGE.Object();
			newObject.setMesh(smesh);
			newObject.setMaterial(blue);
			newObject.setScale(rad);
			scene.addObject(newObject);
			var sphere=new jigLib.JSphere(null,rad);
			sphere.set_mass(1);
			sphere.set_friction(0);
			system.addBody(sphere);
			sphere.moveTo([x,y,z,0]);
			links.push({glge:newObject,jig:sphere,type:'temporary'})
		}
	
		// adds a cube / box to the scene
		var addCube=function(x,y,z){
			var newObject=new GLGE.Object();
			newObject.setMesh(cmesh);
			newObject.setMaterial(blue);
			newObject.setScale(rad/2);
			scene.addObject(newObject);
			var cube=new jigLib.JBox(null, rad, rad, rad);
			cube.set_mass(1);
			cube.set_friction(0);
			system.addBody(cube);
			cube.moveTo([x,y,z,0]);
			links.push({glge:newObject,jig:cube,type:'temporary'})
		}
		
		// add a cylinder / capsule to the scene
		var addCylinder=function(x,y,z){
			var newObject=new GLGE.Object();
			newObject.setMesh(cymesh);
			newObject.setMaterial(blue);
			newObject.setScale(rad/2);
			scene.addObject(newObject);
			var capsule=new jigLib.JCapsule(null, 1, 2);
			capsule.set_rotationX(90);
			capsule.set_mass(1);
			capsule.set_friction(0);
			system.addBody(capsule);
			capsule.moveTo([x,y,z,0]);
			links.push({glge:newObject,jig:capsule,type:'temporary'})
		}
		
		// reference to the JigLibJS physics system singleton
		system=jigLib.PhysicsSystem.getInstance();
		system.setGravity([0,-9.8,0,0]);
	
		// initial JigLib bodies matching the GLGE objects added in the XML above
		var leftSphere=new jigLib.JSphere(null,10);
		leftSphere.set_mass(1);
		leftSphere.set_friction(0);
		leftSphere.moveTo([-70,50,0,0]);
		leftSphere.set_movable(false);
		system.addBody(leftSphere);
		
		var rightSphere=new jigLib.JSphere(null,10);
		rightSphere.set_mass(1);
		rightSphere.set_friction(0);
		rightSphere.moveTo([70,50,0,0]);
		rightSphere.set_movable(false);
		system.addBody(rightSphere);
		
		// the GravityFieldEffects:
		leftGF=new jigLib.GravityField(leftSphere.get_position(), 10, 0, leftSphere);
		system.addEffect(leftGF);
		
		rightGF=new jigLib.GravityField(rightSphere.get_position(), 10, 0, rightSphere);
		system.addEffect(rightGF);
		
		var ground=new jigLib.JPlane(null,[0, 1, 0, 0]);
		ground.set_friction(0);
		system.addBody(ground);
		
		var roof=new jigLib.JPlane(null,[0, -1, 0, 0]);
		roof.set_friction(0);
		roof.set_y(100);
		system.addBody(roof);
	
		var lWall=new jigLib.JPlane(null,[0,1,0]);
		lWall.set_friction(0);
		lWall.set_x(-100);
		lWall.set_rotationZ(-88.85);
		system.addBody(lWall);
	
		var rWall=new jigLib.JPlane(null,[0,1,0]);
		rWall.set_friction(0);
		rWall.set_x(100);
		rWall.set_rotationZ(-88.85);
		system.addBody(rWall);
	
		var bWall=new jigLib.JPlane(null,[0,1,0]);
		bWall.set_friction(0);
		bWall.set_rotationX(88.85);
		bWall.set_z(-100);
		system.addBody(bWall);
	
		var fWall=new jigLib.JPlane(null,[0,-1,0]);
		fWall.set_friction(0);
		fWall.set_rotationX(-90);
		fWall.set_z(20);
		system.addBody(fWall);
	
		// link the GLGE scene objects to the jiglib bodies
		links.push({glge:leftSphereObj,jig:leftSphere,type:'fixed'});
		links.push({glge:rightSphereObj,jig:rightSphere,type:'fixed'});
		links.push({glge:groundObj,jig:ground,type:'fixed'});
		links.push({glge:roofObj,jig:roof,type:'fixed'});
		links.push({glge:bWallObj,jig:bWall,type:'fixed'});
		links.push({glge:lWallObj,jig:lWall,type:'fixed'});
		links.push({glge:rWallObj,jig:rWall,type:'fixed'});
		
		var lasttime;
		var renderCount;
		
		// renders the scene
		function render(){
			renderCount++;
			var now=(new Date()).getTime();
			var inttime=(now-lasttime)/1000;
			if (inttime<0.05) inttime=0.05;
			system.integrate((now-lasttime)/1000);
			lasttime=now;
			
			for(var i=0; i<links.length;i++){
				links[i].glge.setLocY(links[i].jig.get_currentState().position[1]);
				links[i].glge.setLocX(links[i].jig.get_currentState().position[0]);
				links[i].glge.setLocZ(links[i].jig.get_currentState().position[2]);
				var ori=GLGE.Mat4(links[i].jig.get_currentState().get_orientation().glmatrix);
				links[i].glge.setRotMatrix(ori);
			}
			
			renderer.render();
		}
	
		var renderT;
		
		// starts rendering
		start=function(button) {
			button.disabled=true;
			document.getElementById('shape').disabled=true;
			document.getElementById('solver').disabled=true;
			document.getElementById('stopBtn').disabled=false;
			system.setSolverType(document.getElementById('solver').value);
			addObjects(document.getElementById('shape').value);
			lasttime=(new Date()).getTime();
			renderCount=0;
			renderT=setInterval(render,30);
		}
		
		// stops rendering
		stop=function(button) {
			clearInterval(renderT);
			button.disabled=true;
			document.getElementById('shape').disabled=false;
			document.getElementById('solver').disabled=false;
			document.getElementById('startBtn').disabled=false;
			clearObjects();
		}
	}
	
	XMLdoc.parseScript("glge_document");

-->
</script> 

<!-- user controls -->
object type: <select name="shape" id="shape">
	<option value="spheres">spheres</option>
	<option value="cubes">cubes</option>
	<option value="capsules">capsules</option>
</select> <br />
solver: <select name="solver" id="solver">
	<option value="FAST">fast</option>
	<option value="NORMAL">normal</option>
	<option value="ACCUMULATED" selected="selected">accumulated</option>
</select> <br />
<button id="startBtn" onclick="start(this);">start</button>
<button id="stopBtn" onclick="stop(this);" disabled="disabled">stop</button><br />
	<table>
		<tr>
			<td><strong>left gravity field</strong></td>
			<td><button onclick="leftGF.enabled=!leftGF.enabled; this.innerHTML='switch '+(leftGF.enabled?'off':'on');">switch off</button></td>
			<td>radius: <div class="slider" id="divlr"><input class="slider-input" id="slidelr" name="slidex" /></div></td>
			<td><input id="displr" name="displr" type="text" value="0" disabled="disabled" style="width:50px" /></td>
			<td>strength: <div class="slider" id="divlf"><input class="slider-input" id="slidelf" name="slidex" /></div></td>
			<td><input id="displf" name="displf" type="text" value="0" disabled="disabled" style="width:50px" /> *</td>
		</tr>
		<tr>
			<td><strong>right gravity field</strong></td>
			<td><button onclick="rightGF.enabled=!rightGF.enabled;  this.innerHTML='switch '+(rightGF.enabled?'off':'on');">switch off</button></td>
			<td>radius: <div class="slider" id="divrr"><input class="slider-input" id="sliderr" name="slidex" /></div></td>
			<td><input id="disprr" name="disprr" type="text" value="0" disabled="disabled" style="width:50px" /></td>
			<td>strength: <div class="slider" id="divrf"><input class="slider-input" id="sliderf" name="slidex" /></div></td>
			<td><input id="disprf" name="disprf" type="text" value="0" disabled="disabled" style="width:50px" /> *</td>
		</tr>
	</table>
<i>* a negative value for strength will reverse the effect</i>

<script type="text/javascript">
	//setup and bind the sliders
	var slr = new Slider(document.getElementById("divlr"), document.getElementById("slidelr"));
	var slf = new Slider(document.getElementById("divlf"), document.getElementById("slidelf"));
	var srr = new Slider(document.getElementById("divrr"), document.getElementById("sliderr"));
	var srf = new Slider(document.getElementById("divrf"), document.getElementById("sliderf"));
	
	slr.setMinimum(10); 
	slf.setMinimum(-100); 
	srr.setMinimum(10);
	srf.setMinimum(-100);
	
	slr.setMaximum(150); 
	slf.setMaximum(100); 
	srr.setMaximum(150);
	srf.setMaximum(100);
	
	document.getElementById("displr").value = 10;
	document.getElementById("disprr").value = 10;
	
	// the sliders are bound to the radius and force properties of the gravity field effects
	slr.onchange=function() { document.getElementById("displr").value = leftGF.radius = slr.getValue(); };
	slf.onchange=function() { document.getElementById("displf").value = leftGF.force = slf.getValue() / 100; };
	srr.onchange=function() { document.getElementById("disprr").value = rightGF.radius = srr.getValue(); };
	srf.onchange=function() { document.getElementById("disprf").value = rightGF.force = srf.getValue() / 100; };
</script>

</div>
</body>
</html>

